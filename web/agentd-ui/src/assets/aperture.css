/* Manifold Aperture Theme
   Refined, high-performance gradient system + balanced color surfaces.
   Principles:
     • Subtle vertical (symmetrical) gradients only where they add depth.
     • Avoid heavy multi-layer radial backgrounds (performance + visual noise).
     • Keep contrast by pairing low-chroma neutrals with brand accent lines.
     • No shadow stacking; rely on color, spacing, hierarchy.
   Performance notes (see: tryhoverify.com blog on gradient optimization):
     • Use a SINGLE linear-gradient per element instead of multiple stacked layers.
     • Prefer linear-gradient over large radial backgrounds (cheaper to paint).
     • Avoid background-attachment: fixed (triggers repaint on scroll).
     • Reuse CSS vars so the browser can optimize caching.
*/

/* ============================================================================
   APERTURE DARK THEME
   - Deep, rich backgrounds with subtle color shifts
   - Crisp contrast without harsh whites
   ============================================================================ */

[data-theme="aperture-dark"] .aperture {
  /* Radius scale */
  --radius-sm: 6px;
  --radius-md: 10px;
  --radius-lg: 14px;
  
  /* Typography scale */
  --font-size-xs: 0.75rem;
  --font-size-sm: 0.875rem;
  --font-size-base: 0.9375rem;
  --font-size-lg: 1.125rem;
  --font-size-xl: 1.5rem;

  /* Spacing scale */
  --space-xs: 0.5rem;
  --space-sm: 0.75rem;
  --space-md: 1rem;
  --space-lg: 1.5rem;
  --space-xl: 2rem;
  --space-2xl: 3rem;

  /* Edge highlight color for caustic panel border */
  --edge-highlight-color: 255 255 255;

  /* Surface gradient tokens (vertical for symmetry) */
  /* Using low-contrast stops to avoid banding while adding depth. */
  /* Contrast tuned: widened stop deltas for clearer hierarchy (panel < card < input < muted) */
  --grad-panel: linear-gradient(to bottom, rgb(var(--color-surface) / 0.70), rgb(var(--color-surface) / 0.58));
  --grad-card: linear-gradient(to bottom, rgb(var(--color-surface) / 0.88), rgb(var(--color-surface) / 0.70));
  --grad-muted: linear-gradient(to bottom, rgb(var(--color-surface-muted) / 0.60), rgb(var(--color-surface-muted) / 0.44));
  --grad-input: linear-gradient(to bottom, rgb(var(--color-surface-muted) / 0.42), rgb(var(--color-surface-muted) / 0.28));
  --grad-bg: linear-gradient(to bottom, rgb(var(--color-background) / 1), rgb(var(--color-background) / 0.90));

  background: var(--grad-bg);

  /* Accent sprinkles: ultra-light overlay and selection */
  --accent-sprinkle: linear-gradient(to bottom, rgb(var(--color-accent) / 0.06), transparent 30%);
  --accent-underline: linear-gradient(to right, rgb(var(--color-accent) / 0.6), rgb(var(--color-accent) / 0.2));
}
[data-theme="aperture-dark"] .aperture ::selection {
  background: rgb(var(--color-accent) / 0.25);
  color: rgb(var(--color-accent-foreground));
}

/* Heading underline accent (subtle) */
[data-theme="aperture-dark"] .aperture h1,
[data-theme="aperture-dark"] .aperture h2 {
  background-image: none;
}

/* Lists with accent bullets */
[data-theme="aperture-dark"] .aperture ul li::marker {
  color: rgb(var(--color-accent));
}

/* Base panels - differentiated by subtle background shifts, not shadows */
[data-theme="aperture-dark"] .aperture .ap-panel {
  position: relative;
  border-radius: var(--radius-lg);
  /* Two-layer background: surface fill + caustic edge ring */
  border: 1px solid transparent; /* required for background-clip ring */
  background:
    var(--grad-panel) padding-box,
    linear-gradient(to bottom, rgb(var(--edge-highlight-color) / 0.30), rgb(var(--edge-highlight-color) / 0.08)) border-box; /* strengthened edge for clearer separation */
  background-origin: border-box;
  background-clip: padding-box, border-box;
  box-shadow: none;
}

/* Cards - lighter than panels for visual hierarchy */
[data-theme="aperture-dark"] .aperture .ap-card {
  border-radius: var(--radius-md);
  background: var(--grad-card);
  border: 1px solid rgb(var(--color-border) / 0.14) !important; /* introduce subtle hairline for contrast */
  box-shadow: none;
}

/* Generic surface containers - no borders, rely on background differentiation */
[data-theme="aperture-dark"] .aperture :is(section,div,article).rounded-2xl.bg-surface,
[data-theme="aperture-dark"] .aperture :is(section,div,article).rounded-xl.bg-surface,
[data-theme="aperture-dark"] .aperture :is(section,div,article).rounded-5.bg-surface {
  border: none !important;
  box-shadow: none !important;
  background: var(--grad-panel);
}

/* (rails removed by request) */

/* Chips - minimal, no shadow, just background */
[data-theme="aperture-dark"] .aperture .ap-chip {
  border-radius: 999px;
  background: var(--grad-muted);
  box-shadow: none;
  border: none;
  padding: 0.375rem 0.65rem;
  font-size: var(--font-size-xs);
  font-weight: 600;
  letter-spacing: 0.03em;
}

/* Inputs - subtle inset feel without heavy shadows */
[data-theme="aperture-dark"] .aperture .ap-input {
  border-radius: var(--radius-md);
  background: var(--grad-input);
  box-shadow: none;
  border: 1px solid rgb(var(--color-border) / 0.22);
}

[data-theme="aperture-dark"] .aperture .ap-input:focus-within,
[data-theme="aperture-dark"] .aperture .ap-input:focus {
  background: linear-gradient(to bottom, rgb(var(--color-surface-muted) / 0.46), rgb(var(--color-surface-muted) / 0.38));
  border-color: rgb(var(--color-accent) / 0.60);
  outline: none;
}

/* Buttons - no shadows, rely on background and hover states */
[data-theme="aperture-dark"] .aperture button[class*='shadow-'] {
  box-shadow: none !important;
}

/* Header separators - hairline only when necessary */
[data-theme="aperture-dark"] .aperture .ap-hairline-b {
  border-bottom: 1px solid rgb(var(--color-border) / 0.16); /* slightly stronger for clarity */
  box-shadow: none;
}

/* Rings - minimal, subtle */
[data-theme="aperture-dark"] .aperture .ap-ring {
  border: 1px solid rgb(var(--color-border) / 0.20);
  box-shadow: none;
}

/* Typography overrides for consistency */
[data-theme="aperture-dark"] .aperture h1 { 
  font-size: var(--font-size-xl); 
  font-weight: 600; 
  letter-spacing: -0.02em;
  line-height: 1.2;
}

[data-theme="aperture-dark"] .aperture h2 { 
  font-size: var(--font-size-lg); 
  font-weight: 600; 
  letter-spacing: -0.01em;
  line-height: 1.3;
}

[data-theme="aperture-dark"] .aperture h3 { 
  font-size: var(--font-size-base); 
  font-weight: 600; 
  line-height: 1.4;
}

[data-theme="aperture-dark"] .aperture p,
[data-theme="aperture-dark"] .aperture .text-base { 
  font-size: var(--font-size-base); 
  line-height: 1.6;
}

[data-theme="aperture-dark"] .aperture .text-sm { 
  font-size: var(--font-size-sm); 
  line-height: 1.5;
}

[data-theme="aperture-dark"] .aperture .text-xs { 
  font-size: var(--font-size-xs); 
  line-height: 1.4;
}

/* ============================================================================
  APERTURE LIGHT THEME
  Subtle neutral gradients + gentle chroma lifts for clarity.
  Mirrors dark theme structure for symmetry.
*/

[data-theme="aperture-light"] .aperture {
  /* Explicit light palette tokens to increase separation and readability */
  --color-background: 248 249 251; /* page bg */
  --color-surface: 255 255 255;     /* panels/cards */
  --color-surface-muted: 245 247 250; /* chips/inputs */
  --color-border: 210 216 222;      /* hairlines */
  --color-input: 241 244 248;
  --color-ring: 112 109 230;        /* keep accent ring */
  --color-foreground: 23 27 34;     /* primary text */
  --color-muted-foreground: 73 84 96;
  --color-subtle-foreground: 95 106 118;
  --color-faint-foreground: 124 135 148;
  --color-muted: 250 252 255;
  --color-accent: 90 89 211;
  --color-accent-foreground: 255 255 255;
  --color-destructive: 210 57 41;
  --color-destructive-foreground: 255 255 255;
  --color-success: 22 163 135;
  --color-success-foreground: 255 255 255;
  --color-info: 2 132 199;
  --color-info-foreground: 255 255 255;
  --color-warning: 202 138 4;
  --color-warning-foreground: 24 24 27;
  --radius-sm: 6px;
  --radius-md: 10px;
  --radius-lg: 14px;
  
  --font-size-xs: 0.75rem;
  --font-size-sm: 0.875rem;
  --font-size-base: 0.9375rem;
  --font-size-lg: 1.125rem;
  --font-size-xl: 1.5rem;

  --space-xs: 0.5rem;
  --space-sm: 0.75rem;
  --space-md: 1rem;
  --space-lg: 1.5rem;
  --space-xl: 2rem;
  --space-2xl: 3rem;

  /* Edge highlight color for caustic panel border (still light; very faint) */
  --edge-highlight-color: 255 255 255;

  /* Light surface gradient tokens — stronger separation */
  /* Contrast tuned for light theme: widened gradients & deeper page bg */
  --grad-panel: linear-gradient(to bottom, rgb(var(--color-surface) / 1), rgb(var(--color-surface) / 0.92));
  --grad-card: linear-gradient(to bottom, rgb(var(--color-surface) / 1), rgb(var(--color-surface) / 0.985));
  --grad-muted: linear-gradient(to bottom, rgb(var(--color-surface-muted) / 0.70), rgb(var(--color-surface-muted) / 0.54));
  --grad-input: linear-gradient(to bottom, rgb(var(--color-surface-muted) / 0.52), rgb(var(--color-surface-muted) / 0.38));
  --grad-bg: linear-gradient(to bottom, rgb(var(--color-background) / 1), rgb(var(--color-background) / 0.94));

  background: var(--grad-bg);

  /* Accent sprinkles for light theme */
  --accent-sprinkle: linear-gradient(to bottom, rgb(var(--color-accent) / 0.04), transparent 30%);
  --accent-underline: linear-gradient(to right, rgb(var(--color-accent) / 0.7), rgb(var(--color-accent) / 0.25));
}
[data-theme="aperture-light"] .aperture ::selection {
  background: rgb(var(--color-accent) / 0.20);
  color: rgb(var(--color-accent-foreground));
}

[data-theme="aperture-light"] .aperture h1,
[data-theme="aperture-light"] .aperture h2 {
  background-image: none;
}

[data-theme="aperture-light"] .aperture ul li::marker {
  color: rgb(var(--color-accent));
}

/* Base panels - warm off-white with subtle tint */
[data-theme="aperture-light"] .aperture .ap-panel {
  position: relative;
  border-radius: var(--radius-lg);
  border: 1px solid transparent;
  background:
    var(--grad-panel) padding-box,
    linear-gradient(to bottom, rgb(var(--edge-highlight-color) / 0.40), rgb(var(--edge-highlight-color) / 0.14)) border-box; /* stronger edge */
  background-origin: border-box;
  background-clip: padding-box, border-box;
  box-shadow: none;
}

/* Cards - brighter than panels, crisp contrast */
[data-theme="aperture-light"] .aperture .ap-card {
  border-radius: var(--radius-md);
  background: var(--grad-card);
  border: 1px solid rgb(var(--color-border) / 0.34) !important; /* slightly stronger hairline for separation */
  box-shadow: none;
}

/* Generic surface containers - balanced opacity */
[data-theme="aperture-light"] .aperture :is(section,div,article).rounded-2xl.bg-surface,
[data-theme="aperture-light"] .aperture :is(section,div,article).rounded-xl.bg-surface,
[data-theme="aperture-light"] .aperture :is(section,div,article).rounded-5.bg-surface {
  border: 1px solid rgb(var(--color-border) / 0.18) !important; /* reinforce container separation */
  box-shadow: none !important;
  background: var(--grad-panel);
}

/* (rails removed by request) */

/* Chips - with color tint for visual interest */
[data-theme="aperture-light"] .aperture .ap-chip {
  border-radius: 999px;
  background: var(--grad-muted);
  box-shadow: none;
  border: none;
  padding: 0.375rem 0.65rem;
  font-size: var(--font-size-xs);
  font-weight: 600;
  letter-spacing: 0.03em;
}

/* Inputs - clear contrast with visible border */
[data-theme="aperture-light"] .aperture .ap-input {
  border-radius: var(--radius-md);
  background: var(--grad-input);
  box-shadow: none;
  border: 1px solid rgb(var(--color-border) / 0.28);
}

[data-theme="aperture-light"] .aperture .ap-input:focus-within,
[data-theme="aperture-light"] .aperture .ap-input:focus {
  background: linear-gradient(to bottom, rgb(var(--color-surface-muted) / 0.50), rgb(var(--color-surface-muted) / 0.42));
  border-color: rgb(var(--color-accent) / 0.60);
  outline: none;
}

/* Buttons */
[data-theme="aperture-light"] .aperture button[class*='shadow-'] {
  box-shadow: none !important;
}

/* Header separators */
[data-theme="aperture-light"] .aperture .ap-hairline-b {
  border-bottom: 1px solid rgb(var(--color-border) / 0.18); /* slightly stronger */
  box-shadow: none;
}

/* Rings */
[data-theme="aperture-light"] .aperture .ap-ring {
  border: 1px solid rgb(var(--color-border) / 0.22);
  box-shadow: none;
}

/* Typography - same as dark for consistency */
[data-theme="aperture-light"] .aperture h1 { 
  font-size: var(--font-size-xl); 
  font-weight: 600; 
  letter-spacing: -0.02em;
  line-height: 1.2;
}

[data-theme="aperture-light"] .aperture h2 { 
  font-size: var(--font-size-lg); 
  font-weight: 600; 
  letter-spacing: -0.01em;
  line-height: 1.3;
}

[data-theme="aperture-light"] .aperture h3 { 
  font-size: var(--font-size-base); 
  font-weight: 600; 
  line-height: 1.4;
}

[data-theme="aperture-light"] .aperture p,
[data-theme="aperture-light"] .aperture .text-base { 
  font-size: var(--font-size-base); 
  line-height: 1.6;
}

[data-theme="aperture-light"] .aperture .text-sm { 
  font-size: var(--font-size-sm); 
  line-height: 1.5;
}

[data-theme="aperture-light"] .aperture .text-xs { 
  font-size: var(--font-size-xs); 
  line-height: 1.4;
}

