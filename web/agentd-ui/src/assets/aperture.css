/* Manifold Aperture Theme
   Refined, high-performance gradient system + balanced color surfaces.
   Principles:
     • Subtle vertical (symmetrical) gradients only where they add depth.
     • Avoid heavy multi-layer radial backgrounds (performance + visual noise).
     • Keep contrast by pairing low-chroma neutrals with brand accent lines.
     • No shadow stacking; rely on color, spacing, hierarchy.
   Performance notes (see: tryhoverify.com blog on gradient optimization):
     • Use a SINGLE linear-gradient per element instead of multiple stacked layers.
     • Prefer linear-gradient over large radial backgrounds (cheaper to paint).
     • Avoid background-attachment: fixed (triggers repaint on scroll).
     • Reuse CSS vars so the browser can optimize caching.
*/

/* ============================================================================
   APERTURE DARK THEME
   - Deep, rich backgrounds with subtle color shifts
   - Crisp contrast without harsh whites
   ============================================================================ */

[data-theme="aperture-dark"] .aperture {
  /* Radius scale */
  --radius-sm: 6px;
  --radius-md: 10px;
  --radius-lg: 14px;
  
  /* Typography scale */
  --font-size-xs: 0.75rem;
  --font-size-sm: 0.875rem;
  --font-size-base: 0.9375rem;
  --font-size-lg: 1.125rem;
  --font-size-xl: 1.5rem;

  /* Spacing scale */
  --space-xs: 0.5rem;
  --space-sm: 0.75rem;
  --space-md: 1rem;
  --space-lg: 1.5rem;
  --space-xl: 2rem;
  --space-2xl: 3rem;

  /* Surface gradient tokens (vertical for symmetry) */
  /* Using low-contrast stops to avoid banding while adding depth. */
  --grad-panel: linear-gradient(to bottom, rgb(var(--color-surface) / 0.70), rgb(var(--color-surface) / 0.60));
  --grad-card: linear-gradient(to bottom, rgb(var(--color-surface) / 0.82), rgb(var(--color-surface) / 0.72));
  --grad-muted: linear-gradient(to bottom, rgb(var(--color-surface-muted) / 0.55), rgb(var(--color-surface-muted) / 0.45));
  --grad-input: linear-gradient(to bottom, rgb(var(--color-surface-muted) / 0.38), rgb(var(--color-surface-muted) / 0.30));
  --grad-bg: linear-gradient(to bottom, rgb(var(--color-background) / 1), rgb(var(--color-background) / 0.94));

  background: var(--grad-bg);
}

/* Base panels - differentiated by subtle background shifts, not shadows */
[data-theme="aperture-dark"] .aperture .ap-panel {
  border-radius: var(--radius-lg);
  background: var(--grad-panel);
  border: none !important;
  box-shadow: none;
}

/* Cards - lighter than panels for visual hierarchy */
[data-theme="aperture-dark"] .aperture .ap-card {
  border-radius: var(--radius-md);
  background: var(--grad-card);
  border: none !important;
  box-shadow: none;
}

/* Generic surface containers - no borders, rely on background differentiation */
[data-theme="aperture-dark"] .aperture :is(section,div,article).rounded-2xl.bg-surface,
[data-theme="aperture-dark"] .aperture :is(section,div,article).rounded-xl.bg-surface,
[data-theme="aperture-dark"] .aperture :is(section,div,article).rounded-5.bg-surface {
  border: none !important;
  box-shadow: none !important;
  background: var(--grad-panel);
}

/* Accent rail - bold, confident, no shadow */
[data-theme="aperture-dark"] .aperture article.ap-rail {
  position: relative;
  overflow: hidden;
}

[data-theme="aperture-dark"] .aperture article.ap-rail::before {
  content: "";
  position: absolute;
  inset: 0 auto 0 0;
  width: var(--rail-w, 4px);
  background: linear-gradient(180deg, rgb(var(--color-accent)), rgb(var(--color-accent) / 0.6));
  border-top-left-radius: var(--radius-md);
  border-bottom-left-radius: var(--radius-md);
  z-index: 0;
}

/* Chips - minimal, no shadow, just background */
[data-theme="aperture-dark"] .aperture .ap-chip {
  border-radius: 999px;
  background: var(--grad-muted);
  box-shadow: none;
  border: none;
  padding: 0.375rem 0.65rem;
  font-size: var(--font-size-xs);
  font-weight: 600;
  letter-spacing: 0.03em;
}

/* Inputs - subtle inset feel without heavy shadows */
[data-theme="aperture-dark"] .aperture .ap-input {
  border-radius: var(--radius-md);
  background: var(--grad-input);
  box-shadow: none;
  border: 1px solid rgb(var(--color-border) / 0.18);
}

[data-theme="aperture-dark"] .aperture .ap-input:focus-within,
[data-theme="aperture-dark"] .aperture .ap-input:focus {
  background: linear-gradient(to bottom, rgb(var(--color-surface-muted) / 0.46), rgb(var(--color-surface-muted) / 0.38));
  border-color: rgb(var(--color-accent) / 0.55);
  outline: none;
}

/* Buttons - no shadows, rely on background and hover states */
[data-theme="aperture-dark"] .aperture button[class*='shadow-'] {
  box-shadow: none !important;
}

/* Header separators - hairline only when necessary */
[data-theme="aperture-dark"] .aperture .ap-hairline-b {
  border-bottom: 1px solid rgb(var(--color-border) / 0.12);
  box-shadow: none;
}

/* Rings - minimal, subtle */
[data-theme="aperture-dark"] .aperture .ap-ring {
  border: 1px solid rgb(var(--color-border) / 0.15);
  box-shadow: none;
}

/* Typography overrides for consistency */
[data-theme="aperture-dark"] .aperture h1 { 
  font-size: var(--font-size-xl); 
  font-weight: 600; 
  letter-spacing: -0.02em;
  line-height: 1.2;
}

[data-theme="aperture-dark"] .aperture h2 { 
  font-size: var(--font-size-lg); 
  font-weight: 600; 
  letter-spacing: -0.01em;
  line-height: 1.3;
}

[data-theme="aperture-dark"] .aperture h3 { 
  font-size: var(--font-size-base); 
  font-weight: 600; 
  line-height: 1.4;
}

[data-theme="aperture-dark"] .aperture p,
[data-theme="aperture-dark"] .aperture .text-base { 
  font-size: var(--font-size-base); 
  line-height: 1.6;
}

[data-theme="aperture-dark"] .aperture .text-sm { 
  font-size: var(--font-size-sm); 
  line-height: 1.5;
}

[data-theme="aperture-dark"] .aperture .text-xs { 
  font-size: var(--font-size-xs); 
  line-height: 1.4;
}

/* ============================================================================
  APERTURE LIGHT THEME
  Subtle neutral gradients + gentle chroma lifts for clarity.
  Mirrors dark theme structure for symmetry.
*/

[data-theme="aperture-light"] .aperture {
  --radius-sm: 6px;
  --radius-md: 10px;
  --radius-lg: 14px;
  
  --font-size-xs: 0.75rem;
  --font-size-sm: 0.875rem;
  --font-size-base: 0.9375rem;
  --font-size-lg: 1.125rem;
  --font-size-xl: 1.5rem;

  --space-xs: 0.5rem;
  --space-sm: 0.75rem;
  --space-md: 1rem;
  --space-lg: 1.5rem;
  --space-xl: 2rem;
  --space-2xl: 3rem;

  /* Light surface gradient tokens */
  --grad-panel: linear-gradient(to bottom, rgb(var(--color-surface) / 0.93), rgb(var(--color-surface) / 0.86));
  --grad-card: linear-gradient(to bottom, rgb(var(--color-surface) / 0.98), rgb(var(--color-surface) / 0.92));
  --grad-muted: linear-gradient(to bottom, rgb(var(--color-surface-muted) / 0.60), rgb(var(--color-surface-muted) / 0.50));
  --grad-input: linear-gradient(to bottom, rgb(var(--color-surface-muted) / 0.42), rgb(var(--color-surface-muted) / 0.34));
  --grad-bg: linear-gradient(to bottom, rgb(var(--color-background) / 1), rgb(var(--color-background) / 0.97));

  background: var(--grad-bg);
}

/* Base panels - warm off-white with subtle tint */
[data-theme="aperture-light"] .aperture .ap-panel {
  border-radius: var(--radius-lg);
  background: var(--grad-panel);
  border: none !important;
  box-shadow: none;
}

/* Cards - brighter than panels, crisp contrast */
[data-theme="aperture-light"] .aperture .ap-card {
  border-radius: var(--radius-md);
  background: var(--grad-card);
  border: none !important;
  box-shadow: none;
}

/* Generic surface containers - balanced opacity */
[data-theme="aperture-light"] .aperture :is(section,div,article).rounded-2xl.bg-surface,
[data-theme="aperture-light"] .aperture :is(section,div,article).rounded-xl.bg-surface,
[data-theme="aperture-light"] .aperture :is(section,div,article).rounded-5.bg-surface {
  border: none !important;
  box-shadow: none !important;
  background: var(--grad-panel);
}

/* Accent rail - vibrant and clear */
[data-theme="aperture-light"] .aperture article.ap-rail {
  position: relative;
  overflow: hidden;
}

[data-theme="aperture-light"] .aperture article.ap-rail::before {
  content: "";
  position: absolute;
  inset: 0 auto 0 0;
  width: var(--rail-w, 4px);
  background: linear-gradient(180deg, rgb(var(--color-accent)), rgb(var(--color-accent) / 0.75));
  border-top-left-radius: var(--radius-md);
  border-bottom-left-radius: var(--radius-md);
  z-index: 0;
}

/* Chips - with color tint for visual interest */
[data-theme="aperture-light"] .aperture .ap-chip {
  border-radius: 999px;
  background: var(--grad-muted);
  box-shadow: none;
  border: none;
  padding: 0.375rem 0.65rem;
  font-size: var(--font-size-xs);
  font-weight: 600;
  letter-spacing: 0.03em;
}

/* Inputs - clear contrast with visible border */
[data-theme="aperture-light"] .aperture .ap-input {
  border-radius: var(--radius-md);
  background: var(--grad-input);
  box-shadow: none;
  border: 1px solid rgb(var(--color-border) / 0.2);
}

[data-theme="aperture-light"] .aperture .ap-input:focus-within,
[data-theme="aperture-light"] .aperture .ap-input:focus {
  background: linear-gradient(to bottom, rgb(var(--color-surface-muted) / 0.50), rgb(var(--color-surface-muted) / 0.42));
  border-color: rgb(var(--color-accent) / 0.55);
  outline: none;
}

/* Buttons */
[data-theme="aperture-light"] .aperture button[class*='shadow-'] {
  box-shadow: none !important;
}

/* Header separators */
[data-theme="aperture-light"] .aperture .ap-hairline-b {
  border-bottom: 1px solid rgb(var(--color-border) / 0.15);
  box-shadow: none;
}

/* Rings */
[data-theme="aperture-light"] .aperture .ap-ring {
  border: 1px solid rgb(var(--color-border) / 0.18);
  box-shadow: none;
}

/* Typography - same as dark for consistency */
[data-theme="aperture-light"] .aperture h1 { 
  font-size: var(--font-size-xl); 
  font-weight: 600; 
  letter-spacing: -0.02em;
  line-height: 1.2;
}

[data-theme="aperture-light"] .aperture h2 { 
  font-size: var(--font-size-lg); 
  font-weight: 600; 
  letter-spacing: -0.01em;
  line-height: 1.3;
}

[data-theme="aperture-light"] .aperture h3 { 
  font-size: var(--font-size-base); 
  font-weight: 600; 
  line-height: 1.4;
}

[data-theme="aperture-light"] .aperture p,
[data-theme="aperture-light"] .aperture .text-base { 
  font-size: var(--font-size-base); 
  line-height: 1.6;
}

[data-theme="aperture-light"] .aperture .text-sm { 
  font-size: var(--font-size-sm); 
  line-height: 1.5;
}

[data-theme="aperture-light"] .aperture .text-xs { 
  font-size: var(--font-size-xs); 
  line-height: 1.4;
}

