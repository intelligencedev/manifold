{
  "intent": "deep_research",
  "description": "Conduct comprehensive research on a given topic and produce a deep research report (≥15,000 characters) in report.md.",
  "keywords": [
    "deep research",
    "comprehensive report",
    "long report"
  ],
  "steps": [
    {
      "id": "s1",
      "text": "Search the web for the topic",
      "tool": {
        "name": "web_search",
        "args": {
          "category": "general",
          "max_results": 10,
          "query": "${A.query}"
        }
      }
    },
    {
      "id": "s2",
      "text": "Fetch the first result's content",
      "guard": "A.first_url",
      "tool": {
        "name": "web_fetch",
        "args": {
          "prefer_readable": true,
          "url": "${A.first_url}"
        }
      },
      "depends_on": [
        "s1"
      ]
    },
    {
      "id": "s3",
      "text": "Fetch the second result's content",
      "guard": "A.second_url",
      "tool": {
        "name": "web_fetch",
        "args": {
          "prefer_readable": true,
          "url": "${A.second_url}"
        }
      },
      "depends_on": [
        "s2"
      ]
    },
    {
      "id": "s4",
      "text": "Fetch the third result's content",
      "guard": "A.third_url",
      "tool": {
        "name": "web_fetch",
        "args": {
          "prefer_readable": true,
          "url": "${A.third_url}"
        }
      },
      "depends_on": [
        "s3"
      ]
    },
    {
      "id": "s5",
      "text": "Fetch the fourth result's content",
      "guard": "A.fourth_url",
      "tool": {
        "name": "web_fetch",
        "args": {
          "prefer_readable": true,
          "url": "${A.fourth_url}"
        }
      },
      "depends_on": [
        "s4"
      ]
    },
    {
      "id": "s6",
      "text": "Fetch the fifth result's content",
      "guard": "A.fifth_url",
      "tool": {
        "name": "web_fetch",
        "args": {
          "prefer_readable": true,
          "url": "${A.fifth_url}"
        }
      },
      "depends_on": [
        "s5"
      ]
    },
    {
      "id": "s7",
      "text": "Fetch the sixth result's content",
      "guard": "A.sixth_url",
      "tool": {
        "name": "web_fetch",
        "args": {
          "prefer_readable": true,
          "url": "${A.sixth_url}"
        }
      },
      "depends_on": [
        "s6"
      ]
    },
    {
      "id": "s8",
      "text": "Fetch the seventh result's content",
      "guard": "A.seventh_url",
      "tool": {
        "name": "web_fetch",
        "args": {
          "prefer_readable": true,
          "url": "${A.seventh_url}"
        }
      },
      "depends_on": [
        "s7"
      ]
    },
    {
      "id": "s9",
      "text": "Fetch the eighth result's content",
      "guard": "A.eighth_url",
      "tool": {
        "name": "web_fetch",
        "args": {
          "prefer_readable": true,
          "url": "${A.eighth_url}"
        }
      },
      "depends_on": [
        "s8"
      ]
    },
    {
      "id": "s10",
      "text": "Fetch the ninth result's content",
      "guard": "A.ninth_url",
      "tool": {
        "name": "web_fetch",
        "args": {
          "prefer_readable": true,
          "url": "${A.ninth_url}"
        }
      },
      "depends_on": [
        "s9"
      ]
    },
    {
      "id": "s11",
      "text": "Fetch the tenth result's content",
      "guard": "A.tenth_url",
      "tool": {
        "name": "web_fetch",
        "args": {
          "prefer_readable": true,
          "url": "${A.tenth_url}"
        }
      },
      "depends_on": [
        "s10"
      ]
    },
    {
      "id": "s12",
      "text": "Synthesize fetched contents into a draft deep research report",
      "tool": {
        "name": "llm_transform",
        "args": {
          "input": "Query: ${A.query}\n\nContents:\n${A.first_content}\n${A.second_content}\n${A.third_content}\n${A.fourth_content}\n${A.fifth_content}\n${A.sixth_content}\n${A.seventh_content}\n${A.eighth_content}\n${A.ninth_content}\n${A.tenth_content}",
          "instruction": "Using the provided fetched web contents, write a comprehensive deep‑research report on the query. Include an executive summary, well‑structured sections, proper citations where applicable, and ensure the total length is at least 15,000 characters. Output the report in markdown format."
        }
      },
      "depends_on": [
        "s11"
      ]
    },
    {
      "id": "s13",
      "text": "Write draft report to report.md",
      "tool": {
        "name": "write_file",
        "args": {
          "content": "${A.llm_output}",
          "path": "report.md"
        }
      },
      "depends_on": [
        "s12"
      ]
    },
    {
      "id": "s14",
      "text": "Polish and expand the report to guarantee length and coherence",
      "tool": {
        "name": "llm_transform",
        "args": {
          "input": "${A.llm_output}",
          "instruction": "Refine the draft report to improve clarity, flow, and depth. Ensure the final document is still at least 15,000 characters, contains an executive summary, detailed sections, and properly formatted markdown. Do not ask clarifying questions; simply output the refined report."
        }
      },
      "depends_on": [
        "s13"
      ]
    },
    {
      "id": "s15",
      "text": "Overwrite report.md with the final polished report",
      "tool": {
        "name": "write_file",
        "args": {
          "content": "${A.llm_output}",
          "path": "report.md"
        }
      },
      "depends_on": [
        "s14"
      ]
    },
    {
      "id": "s16",
      "text": "Echo report to console (unix)",
      "guard": "A.os != 'windows'",
      "tool": {
        "name": "run_cli",
        "args": {
          "args": [
            "report.md"
          ],
          "command": "cat"
        }
      },
      "depends_on": [
        "s15"
      ]
    },
    {
      "id": "s17",
      "text": "Echo report to console (windows)",
      "guard": "A.os == 'windows'",
      "tool": {
        "name": "run_cli",
        "args": {
          "args": [
            "report.md"
          ],
          "command": "type"
        }
      },
      "depends_on": [
        "s16"
      ]
    }
  ],
  "ui": {
    "layout": {
      "s1": {
        "x": 140,
        "y": 160
      },
      "s10": {
        "x": 3020,
        "y": 160
      },
      "s11": {
        "x": 3340,
        "y": 160
      },
      "s12": {
        "x": 3660,
        "y": 160
      },
      "s13": {
        "x": 3980,
        "y": 160
      },
      "s14": {
        "x": 4300,
        "y": 160
      },
      "s15": {
        "x": 4620,
        "y": 160
      },
      "s16": {
        "x": 4940,
        "y": 160
      },
      "s17": {
        "x": 5260,
        "y": 160
      },
      "s2": {
        "x": 460,
        "y": 160
      },
      "s3": {
        "x": 780,
        "y": 160
      },
      "s4": {
        "x": 1100,
        "y": 160
      },
      "s5": {
        "x": 1420,
        "y": 160
      },
      "s6": {
        "x": 1740,
        "y": 160
      },
      "s7": {
        "x": 2060,
        "y": 160
      },
      "s8": {
        "x": 2380,
        "y": 160
      },
      "s9": {
        "x": 2700,
        "y": 160
      }
    }
  }
}
